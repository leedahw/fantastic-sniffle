<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>orbIt</title>

    <!-- Welcome to ZIM at https://zimjs.com - Code Creativity!                              -->
    <!-- ZIM runs on the HTML Canvas powered by JavaScript and CreateJS https://createjs.com -->
    <!-- ZIM is free to use. You can donate to help improve ZIM at https://zimjs.com/donate  -->

    <script src="https://zimjs.org/cdn/1.3.2/createjs.js"></script>
    <script src="https://zimjs.org/cdn/cat/01/zim.js"></script>
    <!-- use zimjs.com/distill for minified individual functions! -->

    <script>
      const scaling = "fit"; // this will resize to fit inside the screen dimensions
      const width = 485;
      const height = 768;
      const color = darker; // ZIM colors like green, blue, pink, faint, clear, etc.
      const outerColor = dark; // any HTML colors like "violet", "#333", etc. are fine to use
      const assets = [
        "logo.png",
        "magnet.png",
        "magnetism.png",
        "greeny.jpg",
        "MagnetMusic.mp3",
      ];

      const path = "assets/";

      const frame = new Frame(
        scaling,
        width,
        height,
        color,
        outerColor,
        assets,
        path,
        new Waiter()
      );

      frame.on("ready", () => {
        zog("ready from ZIM Frame");
        const stage = frame.stage;
        let stageW = frame.width;
        let stageH = frame.height;

        const bg01 = asset("greeny.jpg").center();

        let logo;
        let musicToggle;
        let go;
        let introBack;
        let backingSound;
        let musicNotes;
        let magnet;
        let magnetismL;
        let magnetismR;
        let shenasie;

        part1();

        function part1() {
          go = new Button(100, 50, "Go", silver, mist)
            .sca(0.7)
            .centerReg()
            .loc(243, 440)
            .alp(0)
            .animate({
              props: { alpha: 1 },
              time: 8,
            });

          magnet = asset("magnet.png")
            .rot(3)
            .sca(0.2)
            .loc(28, 605)
            .alp(1)
            .animate({
              obj: { x: 600 },
              from: true,
              // props: { x: 250 },
              time: 2,
              ease: "easeIn",
            })
            .wiggle("x", 40, 2, 3, 0.2, 0.5);

          magnetismL = asset("magnetism.png")
            .sca(0.05)

            .loc(50, 400)
            .alp(1)
            // .animate({
            //   // props: { x: 150 },
            //   time: 5,
            //   // ease: "easeIn",
            // })
            .wiggle("x", 20, 2, 3, 0.02, 0.05);

          magnetismR = asset("magnetism.png")
            .clone()
            .sca(0.05)

            .loc(150, 350)
            .alp(1)
            //   .animate({
            //     // props: { x: 150 },
            //     time: 5,
            //     // ease: "easeIn",
            //   });
            .wiggle("x", 40, 2, 3, 0.02, 0.05);

          logo = asset("logo.png")
            .sca(0.1)
            .loc(28, -125)
            .alp(1)
            .animate({
              props: { y: 50 },
              time: 5,
              ease: "easeIn",
            })
            .wiggle("x", 40, 2, 3, 0.2, 0.5);

          musicToggle = new CheckBox(30, "ðŸŽ¶", true, null, null).loc(380, -30);

          shenasie = new Label({
            text: "Â©2021 shenasie",
            size: 10,
            font: "Monsterrat",
            color: "silver",
            bold: true,
            italic: true,
          }).loc(400, 740);

          go.tap(() => {
            part2();
          });
        }

        //part 2: Main Game.

        function part2() {
          logo.animate({
            props: { alpha: 0 },
            time: 0.5,
            ease: "easeIn",
          });

          magnet = asset("magnet.png")
            .rot(3)
            .sca(0.2)
            .loc(28, 605)
            .alp(0)
            .animate({
              obj: { x: 600 },
              from: true,
              time: 2,
              ease: "easeIn",
            })
            .wiggle("x", 40, 2, 3, 0.2, 0.5);

          magnetismL.removeFrom();
          magnetismR.removeFrom();
          // magnetismL = asset("magnetism.png")
          //   .sca(0.05)
          //   .loc(50, 400)
          //   .alp(0)
          //   .wiggle("x", 20, 2, 3, 0.02, 0.05);

          // magnetismR = asset("magnetism.png")
          //   .clone()
          //   .sca(0.05)
          //   .loc(150, 350)
          //   .alp(0)
          //   .wiggle("x", 40, 2, 3, 0.02, 0.05);

          go.removeFrom();

          backingSound = asset("MagnetMusic.mp3").play();

          musicToggle
            .animate({
              props: { x: 380, y: 30 },
              time: 1,
              ease: "easeIn",
            })
            .change(function (e) {
              // this will start off
              if (!backingSound) {
                backingSound = asset("MagnetMusic.mp3").play();
              } else {
                backingSound.paused = !e.target.toggled;
              }
            });

          stage.update();
        }
      });
    </script>

    <meta name="viewport" content="width=device-width, user-scalable=no" />
  </head>
  <body></body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ZIM - Code Creativity</title>
    <script src="https://zimjs.org/cdn/1.3.2/createjs.js"></script>
    <script src="https://zimjs.org/cdn/cat/03/zim.js"></script>
    <script src="https://zimjs.org/cdn/Box2dWeb-2.1.a.3.min.js"></script>
    <script src="https://zimjs.org/cdn/physics_2.1"></script>
    <script>
      // https://zimjs.com - JavaScript Canvas Framework - Code Creativity!

      const frame = new Frame("fit", 1024, 1000, light, dark); //note change to 1000
      frame.on("ready", () => {
        const stage = frame.stage;
        let stageW = frame.width;
        let stageH = frame.height;

        // put your code here
        const physics = new Physics(0);
        // physics.remove(physics.borderTop); //remove border which is blocking/catching olives above canvas
        physics.drag();
        //physics.debug();

        class StickIt {
          constructor(x, y) {
            const sam = (this.sam = new Circle({
              radius: 150,
              color: red,
              percent: 50,
            })
              .pos(600, 500)
              .rot(180)
              .loc(x, y)
              .addPhysics());
            const ralph = (this.ralph = new Circle({
              radius: 150,
              color: blue,
              percent: 50,
            })
              .pos(400, 300)
              .loc(x, y)
              .addPhysics());

            physics.join(
              sam,
              ralph,
              null,
              new Point(ralph.x, ralph.y - 100),
              null,
              null,
              null
            );
          }
        } //end of class
        const spacing = 30;
        const y = stageH / 2 - 100;
        const thingie = new StickIt(stageW / 2 + spacing * -2, y + 500);
        const thingie2 = new StickIt(stageW / 2 + spacing * -2, y);
        zog(thingie.sam.hitTestCircles(thingie2.ralph));

        Ticker.add(() => {
          //thingie.sam.on("pressmove", function () {
          // if (thingie.sam.hitTestCircles(thingie2.ralph)) {
          //   zog("ralph and sam are touching");
          //   //we need way to find location of other circle in hitTest and apply force in that direction
          //   zog(
          //     "thingie.sam: " + "x= " + thingie.sam.x + "y= " + thingie.sam.y
          //   );
          //   zog(
          //     "thingie2.ralph: " +
          //       "x= " +
          //       thingie2.ralph.x +
          //       "y= " +
          //       thingie.sam.y
          //   );
          if (thingie.sam.hitTestCircles(thingie2.ralph, 100)) {
            thingie.sam.force(
              thingie2.ralph.x - thingie.sam.x,
              thingie2.ralph.y - thingie.sam.y
            );
            thingie2.ralph.force(
              thingie.sam.x - thingie2.ralph.x,
              thingie.sam.y - thingie2.ralph.y
            );
          }
        });

        //}
        //});

        stage.update();
      }); //end of ready
    </script>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
  </head>
  <body></body>
</html>
